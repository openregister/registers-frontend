= form_for @api_user do |f|
  .form-group
    = f.label :email, class: 'form-label-bold' do
      Email address
      %span.form-hint Your API key will be sent to this email address
    = f.text_field :email, class: 'form-control', type: 'email', required: true

    %fieldset.inline
      = f.radio_button_fieldset :is_government,
          inline: true      
    .form-group
      #government-department.panel.panel-border-narrow.js-hidden
        = f.label :department, 'Which government organisation do you work for?', class: 'form-label'
        = f.select :department, @government_organisations.all.collect{ |org| [org.data['name'], org.key] }, { include_blank: true }, id: 'government-organisations'
    %fieldset.inline
      %legend
        %label.form-label-bold
          Are you using Registers to build a service?
      .multiple-choice{"data-target" => "service"}
        %input#for-a-service{name: "radio-service-group", type: "radio", value: "Yes"}
        %label{for: "for-a-service"} Yes
      .multiple-choice
        %input#not-for-a-service{name: "radio-service-group", type: "radio", value: "No"}
        %label{for: "for-a-service"} No
      #service.panel.panel-border-narrow.js-hidden
        = f.label :service, 'What is your service called?', class: 'form-label'
        = f.text_field :service, class: 'form-control'

  = f.submit 'Create API key', class: 'button'

= content_for :javascript do
  :javascript
    accessibleAutocomplete.enhanceSelectElement({
      selectElement: document.getElementById('government-organisations'),
      showAllValues: false,
      minLength: 2,
      defaultValue: ''
    });

    var showHideContent = new GOVUK.ShowHideContent();
    showHideContent.init();
