- @page_title = @page.seo_title
- @page_description = @page.description
- @body_class = "#{@page.title.downcase.strip.gsub(' ', '-').gsub(/[^\w-]/, '')}-page"

%nav{class: "breadcrumbs", "aria-label" => "Breadcrumbs"}
  %ol{itemscope: "", itemtype: "http://schema.org/BreadcrumbList"}
    %li{class: "breadcrumbs__item", itemprop: "itemListElement", itemscope: "", itemtype: "http://schema.org/ListItem"}
      = link_to "https://www.gov.uk/service-toolkit#components", itemprop: "item" do
        %span{itemprop: "name"} Components
    %li{class: "breadcrumbs__item", itemprop: "itemListElement", itemscope: "", itemtype: "http://schema.org/ListItem"}
      = link_to root_path, itemprop: "item" do
        %span{itemprop: "name"} Registers
    - if @page.ancestors.present?
      - @page.ancestors.each do |ancestor|
        %li{class: "breadcrumbs__item", itemprop: "itemListElement", itemscope: "", itemtype: "http://schema.org/ListItem"}
          = link_to ancestor.materialized_path, itemprop: "item" do
            %span{itemprop: "name"}= ancestor.menu_title
    %li{class: "breadcrumbs__item breadcrumbs__item--active", itemprop: "itemListElement", itemscope: "", itemtype: "http://schema.org/ListItem"}
      %a{href: "#main", itemprop: "item"}
        %span{itemprop: "name"}= @page.menu_title

.container
  .grid-row
    - if @page.has_children? || @page.parent.present?
      .column-one-third
        %nav.sub-navigation
          %ol{itemscope: "", itemtype: "http://schema.org/ItemList"}
            - @page.root.children.in_menu.sorted.each do |child|
              %li{class: "sub-navigation__item #{'sub-navigation__item--active' if child == @page }", itemprop: "itemListElement", itemscope: "", itemtype: "http://schema.org/ListItem"}
                = link_to child.materialized_path, itemprop: "item" do
                  %span{itemprop: "name"}= child.seo_title
            %li{class: "sub-navigation__item", itemprop: "itemListElement", itemscope: "", itemtype: "http://schema.org/ListItem"}
              = link_to "Suggest a register", spina.new_register_path

    .column-two-thirds
      .govspeak
        = govspeak(@page.content(:text))

        - if @page.title == "Available registers"
          - beta_registers.each do |register|
            %h2= link_to register.register, register._uri, target: :blank
            %p= register.text
