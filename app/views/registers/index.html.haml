- @page_title = 'Get data'
- content_for :body_classes, 'register-index'

%nav.breadcrumbs{role: "Navigation", "aria-label" => "Breadcrumb"}
  %ol{data: {"click-events" => "", "click-category" => "Header", "click-action" => "Breadcrumb Clicked"}}
    %li.breadcrumbs__item
      = link_to 'Components', 'https://www.gov.uk/service-toolkit#components'
    %li.breadcrumbs__item
      = link_to 'GOV.UK Registers', root_path
    %li.breadcrumbs__item.breadcrumbs__item--active
      = link_to 'Get data', '#content', 'aria-current' => 'page'

%main#content.container{role:'main'}
  .grid-row
    .column-two-thirds
      %h1.heading-large Get data for your service
      %p See the #{link_to 'registers that are coming soon', registers_in_progress_path}
    .column-one-third
      = search_form_for @search, url: registers_path(anchor: 'content'), class: 'records-search' do |f|
        = f.label :name_cont, 'Search', class: 'visually-hidden'
        = f.search_field :name_cont, class: 'search-input', placeholder: 'Search'
        = f.submit 'Search', class: 'search-submit'

    .column-full
      - if @registers.present?
        .registers-block-grid
          .grid-row
            - @registers.each do |register|
              .column-one-third
                = link_to register_path(register.slug), class: 'register-block' do
                  %h3.register-block__name= register.name
                  %p.register-block__description= register.register_description
                  - if register.register_authority.present?
                    %div{class: "govuk-organisation-logo #{register.register_authority.data['name'].parameterize}"}
                      %div{class: "logo-container #{crest_class_name(register.register_authority.data['name'].parameterize)}"}
                        %span= register.register_authority.data['name']

      - else
        .no-search-results
          %p
            No results found for <strong>"#{params[:q][:name_cont]}"</strong>
            = link_to 'Reset', registers_path, class: 'reset-link'
